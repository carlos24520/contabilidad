<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sistema Contable Profesional</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background:#eef2f7;
}
.header{
    background:#1f3c88;
    color:white;
    padding:20px;
    text-align:center;
}
.card-box{
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
</style>
</head>

<body>

<div class="header">
    <h2>Sistema Contable Profesional</h2>
</div>

<div class="container mt-4">

<div class="row">

<!-- FORMULARIO -->
<div class="col-md-4">
<div class="card card-box p-3">

<h5>Registrar Movimiento</h5>

<form id="formContable">

<div class="mb-2">
<label>Fecha</label>
<input type="date" id="fecha" class="form-control" required>
</div>

<div class="mb-2">
<label>Concepto</label>
<input type="text" id="concepto" class="form-control" required>
</div>

<div class="mb-2">
<label>Monto</label>
<input type="number" id="monto" class="form-control" required>
</div>

<div class="mb-2">
<label>Tipo Movimiento</label>
<select id="tipo" class="form-select" required>
<option value="">Seleccione</option>
<option value="Ingreso">Ingreso</option>
<option value="Egreso">Egreso</option>
</select>
</div>

<div class="mb-3">
<label>Cuenta Contable</label>
<select id="cuenta" class="form-select" required>
<option value="">Seleccione</option>
<option value="Activo">Activo</option>
<option value="Pasivo">Pasivo</option>
<option value="Patrimonio">Patrimonio</option>
<option value="Ingreso">Ingreso</option>
<option value="Gasto">Gasto</option>
</select>
</div>

<button type="submit" class="btn btn-success w-100">
Registrar
</button>

</form>
</div>
</div>

<!-- TABLA -->
<div class="col-md-8">
<div class="card card-box p-3">

<h5>Libro Diario</h5>

<table class="table table-bordered table-striped text-center">
<thead class="table-dark">
<tr>
<th>Fecha</th>
<th>Concepto</th>
<th>Cuenta</th>
<th>Ingreso</th>
<th>Egreso</th>
</tr>
</thead>
<tbody id="tabla"></tbody>
</table>

</div>
</div>

</div>

<!-- BALANCE Y RESULTADOS -->
<div class="row mt-4">

<div class="col-md-6">
<div class="card card-box p-3">
<h5>ðŸ“Š Balance General</h5>
<p><strong>Activos:</strong> $<span id="activo">0</span></p>
<p><strong>Pasivos:</strong> $<span id="pasivo">0</span></p>
<p><strong>Patrimonio:</strong> $<span id="patrimonio">0</span></p>
<hr>
<p id="ecuacion"></p>
</div>
</div>

<div class="col-md-6">
<div class="card card-box p-3">
<h5>ðŸ“ˆ Estado de Resultados</h5>
<p><strong>Ingresos:</strong> $<span id="ingresos">0</span></p>
<p><strong>Gastos:</strong> $<span id="gastos">0</span></p>
<hr>
<p><strong>Utilidad / PÃ©rdida:</strong> $<span id="utilidad">0</span></p>
</div>
</div>

</div>

</div>

<script>
let movimientos = JSON.parse(localStorage.getItem("movimientosPC")) || [];

const form = document.getElementById("formContable");
const tabla = document.getElementById("tabla");

form.addEventListener("submit", function(e){
e.preventDefault();

const movimiento = {
fecha: fecha.value,
concepto: concepto.value,
monto: parseFloat(monto.value),
tipo: tipo.value,
cuenta: cuenta.value
};

movimientos.push(movimiento);
localStorage.setItem("movimientosPC", JSON.stringify(movimientos));

form.reset();
mostrar();
});

function mostrar(){

tabla.innerHTML="";

let ingresos=0, egresos=0;
let activo=0, pasivo=0, patrimonio=0;
let gastos=0;

movimientos.forEach(mov=>{

let fila=document.createElement("tr");

let ingresoCol="";
let egresoCol="";

if(mov.tipo==="Ingreso"){
ingresos+=mov.monto;
ingresoCol=mov.monto.toLocaleString();
}else{
egresos+=mov.monto;
egresoCol=mov.monto.toLocaleString();
}

if(mov.cuenta==="Activo") activo+=mov.monto;
if(mov.cuenta==="Pasivo") pasivo+=mov.monto;
if(mov.cuenta==="Patrimonio") patrimonio+=mov.monto;
if(mov.cuenta==="Ingreso") ingresos+=mov.monto;
if(mov.cuenta==="Gasto") gastos+=mov.monto;

fila.innerHTML=`
<td>${mov.fecha}</td>
<td>${mov.concepto}</td>
<td>${mov.cuenta}</td>
<td class="text-success">${ingresoCol}</td>
<td class="text-danger">${egresoCol}</td>
`;

tabla.appendChild(fila);

});

let utilidad=ingresos-gastos;

document.getElementById("ingresos").textContent=ingresos.toLocaleString();
document.getElementById("gastos").textContent=gastos.toLocaleString();
document.getElementById("utilidad").textContent=utilidad.toLocaleString();

document.getElementById("activo").textContent=activo.toLocaleString();
document.getElementById("pasivo").textContent=pasivo.toLocaleString();
document.getElementById("patrimonio").textContent=patrimonio.toLocaleString();

document.getElementById("ecuacion").textContent=
"Activo ("+activo.toLocaleString()+") = Pasivo ("+
pasivo.toLocaleString()+") + Patrimonio ("+
patrimonio.toLocaleString()+")";
}

mostrar();
</script>

</body>
</html>